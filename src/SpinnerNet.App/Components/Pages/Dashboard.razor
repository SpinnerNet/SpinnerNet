@page "/dashboard"
@attribute [Authorize]

<PageTitle>Dashboard - Spinner.Net</PageTitle>

<MudContainer MaxWidth="MaxWidth.Large">
    <MudText Typo="Typo.h3" GutterBottom="true">Welcome to Spinner.Net</MudText>
    
    <AuthorizeView>
        <Authorized>
            <MudPaper Class="pa-4 ma-2" Elevation="3">
                <MudText Typo="Typo.h5" GutterBottom="true">Hello, @context.User.Identity?.Name!</MudText>
                <MudText Typo="Typo.body1">
                    Welcome to the Spinner.Net community platform. Here you can access your personalized features:
                </MudText>
                
                <MudGrid Class="mt-4">
                    <MudItem xs="12" sm="6" md="4">
                        <MudCard>
                            <MudCardHeader>
                                <CardHeaderContent>
                                    <MudText Typo="Typo.h6">AI Personas</MudText>
                                </CardHeaderContent>
                                <CardHeaderActions>
                                    <MudIconButton Icon="Icons.Material.Filled.Psychology" Color="Color.Primary" />
                                </CardHeaderActions>
                            </MudCardHeader>
                            <MudCardContent>
                                <MudText Typo="Typo.body2">Create and manage your AI companions</MudText>
                            </MudCardContent>
                            <MudCardActions>
                                <MudButton Color="Color.Primary" Variant="Variant.Text">Coming Soon</MudButton>
                            </MudCardActions>
                        </MudCard>
                    </MudItem>
                    
                    <MudItem xs="12" sm="6" md="4">
                        <MudCard>
                            <MudCardHeader>
                                <CardHeaderContent>
                                    <MudText Typo="Typo.h6">Time Banking</MudText>
                                </CardHeaderContent>
                                <CardHeaderActions>
                                    <MudIconButton Icon="Icons.Material.Filled.AccessTime" Color="Color.Secondary" />
                                </CardHeaderActions>
                            </MudCardHeader>
                            <MudCardContent>
                                <MudText Typo="Typo.body2">Track and exchange time with community members</MudText>
                            </MudCardContent>
                            <MudCardActions>
                                <MudButton Color="Color.Secondary" Variant="Variant.Text">Coming Soon</MudButton>
                            </MudCardActions>
                        </MudCard>
                    </MudItem>
                    
                    <MudItem xs="12" sm="6" md="4">
                        <MudCard>
                            <MudCardHeader>
                                <CardHeaderContent>
                                    <MudText Typo="Typo.h6">Rooms</MudText>
                                </CardHeaderContent>
                                <CardHeaderActions>
                                    <MudIconButton Icon="Icons.Material.Filled.Forum" Color="Color.Tertiary" />
                                </CardHeaderActions>
                            </MudCardHeader>
                            <MudCardContent>
                                <MudText Typo="Typo.body2">Join conversations organized by context</MudText>
                            </MudCardContent>
                            <MudCardActions>
                                <MudButton Color="Color.Tertiary" Variant="Variant.Text">Coming Soon</MudButton>
                            </MudCardActions>
                        </MudCard>
                    </MudItem>
                </MudGrid>
            </MudPaper>
            
            <MudPaper Class="pa-4 ma-2 mt-4" Elevation="3">
                <MudText Typo="Typo.h6" GutterBottom="true">User Information</MudText>
                <MudSimpleTable Dense="true">
                    <tbody>
                        <tr>
                            <td><strong>Name</strong></td>
                            <td>@context.User.Identity?.Name</td>
                        </tr>
                        <tr>
                            <td><strong>Authentication Type</strong></td>
                            <td>@context.User.Identity?.AuthenticationType</td>
                        </tr>
                        <tr>
                            <td><strong>Is Authenticated</strong></td>
                            <td>@context.User.Identity?.IsAuthenticated</td>
                        </tr>
                    </tbody>
                </MudSimpleTable>
            </MudPaper>
        </Authorized>
        <NotAuthorized>
            <MudPaper Class="pa-4 ma-2" Elevation="3">
                <MudText Typo="Typo.h5" Align="Align.Center" Class="mb-4">Please sign in to access your dashboard</MudText>
                <MudButton Color="Color.Primary" 
                           Variant="Variant.Filled" 
                           FullWidth="true"
                           StartIcon="Icons.Material.Filled.Login"
                           OnClick="@(() => Navigation.NavigateTo("/Account/login", forceLoad: true))">
                    Sign In with Microsoft
                </MudButton>
            </MudPaper>
        </NotAuthorized>
    </AuthorizeView>
</MudContainer>

@code {
    @inject NavigationManager Navigation
}